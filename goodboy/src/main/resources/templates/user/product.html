<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" layout:decorate="~{user/layout_user}"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" xmlns="http://www.w3.org/1999/html">
<head>

<body style="" class="">
<section layout:fragment="content">
    <style>
        .row {
            margin: -1px;
        }

        .form-container label {
            display: flex;
            align-items: center;
        }

        .form-container input[type="checkbox"] {
            margin-left: 30px;
        }

        .col {
            margin-bottom: 20px;
        }

        .card {
            border: none;
            box-shadow: 0 0 4px rgba(0, 0, 0, 0.1);
        }

        .pi-pic {
            position: relative;
            text-align: center;
        }

        .pi-pic img {
            width: 98%;
            height: 270px;
            object-fit: cover;
        }

        .pi-pic ul {
            position: absolute;
            bottom: 10px;
            left: 0;
            right: 0;
            text-align: center;
        }

        .pi-pic ul li {
            display: inline-block;
            margin-right: 10px;
        }

        .card-text {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 10px;
        }


        .row-cols-md-3 .col {
            flex: 0 0 33.33%;
            max-width: 33.33%;
        }

        .product-image {
            height: 165px;
            width: 270px;
            object-fit: cover;
        }

        .card {
            border: none;
            box-shadow: 0 0 4px rgba(0, 0, 0, 0.1);
        }

        .card-body {
            width: 100%;
            height: 150px;
        }

        .card-text {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .row-cols-md-3 .col {
            display: flex;
            flex-direction: column;
        }

        .card {
            flex: 1;
        }

        .btn {
            border-radius: 0 5px 5px 0;
        }

        .card-body {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            text-align: center;
        }

        .card-text {
            color: red;
        }

        .row-cols-1 .col {
            align-self: stretch;
        }
    </style>

    <!--    Đăng nhập -->
    <div class="modal fade login" id="getMember" data-bs-toggle="modal" data-bs-keyboard="false" tabindex="-1"
         aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered container">
            <div class="modal-content">
                <div class="modal-body">
                    <div class="jquery-modal blocker current">
                        <div class="login-form">
                            <div class="login-bg">
                                <img src="https://web.nvnstatic.net/tp/T0415/img/login-bg.png?v=3">
                            </div>
                            <div class="form">
                                <h1>Đăng nhập</h1>
                                <div class="external">
                                    <form>
                                        <button class="btn-extlogin btn-facebook" title="Đăng nhập qua Facebook"
                                                type="submit" id="Facebook" name="provider" value="Facebook">
                                            <a href="/user/fbsignin?redirect=/">
                                                <i class="fab fa-facebook-square"></i>
                                                Tiếp tục với Facebook
                                            </a>
                                        </button>
                                        <button class="btn-extlogin btn-google" type="submit"
                                                title="Đăng nhập qua Google+"
                                                id="Google" name="provider" value="Google">
                                            <a href="/user/ggsignin">
                                                <i class="fab fa-google-plus-square"></i>
                                                Đăng nhập với Google
                                            </a>
                                        </button>
                                    </form>
                                </div>
                                <div class="split">
                                    <p>Hoặc</p>
                                </div>
                                <div class="internal">
                                    <form action="/signin" method="post" id="loginForm">
                                        <div class="row">
                                            <div class="label">Tài khoản</div>
                                            <div class="input">
                                                <input type="text" name="username" placeholder="Hãy nhập tên tài khoản">
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="label">Mật khẩu</div>
                                            <div class="input">
                                                <input type="password" name="password" id="passwordModal">
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="button-group">
                                                <button class="btn btn-submit" id="btnsignin" type="submit">ĐĂNG NHẬP
                                                </button>
                                                <a class="btn btn-link ajax-content" data-bs-dismiss="modal"
                                                   aria-label="Close" href="javascript:void(0)" data-bs-toggle="modal"
                                                   data-bs-target="#signup">ĐĂNG KÝ</a>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <p class="forgotpass"><a class="ajax-content" href="/user/getpassword">Quên
                                                mật
                                                khẩu?</a></p>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                    <a href="javascript:void(0)" class="close-modal icon-minutes close" data-bs-dismiss="modal"
                       aria-label="Close"><i class="fas fa-minus-circle"></i> </a>
                </div>
            </div>
        </div>
    </div>
    <!--    Đăng ký-->
    <div class="modal fade login signup-content" id="signup" data-bs-toggle="modal" data-bs-keyboard="false"
         tabindex="-1"
         aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered container">
            <div class="modal-content">
                <div class="modal-body">
                    <div class="jquery-modal blocker current">
                        <div class="login-form">
                            <div class="login-bg">
                                <img src="https://web.nvnstatic.net/tp/T0415/img/login-bg.png?v=3">
                            </div>
                            <div class="form">
                                <div class="center" style="text-align:center;">
                                    <h2>Đăng ký tài khoản</h2>
                                    <p>Chú ý các nội dung có dấu * bạn cần phải nhập</p>

                                </div>
                                <div class="hh-form">
                                    <form id="formSignUp">
                                        <div class="form-controls">
                                            <label>Họ tên:</label>
                                            <div class="controls">
                                                <input type="text" name="fullName" id="fullName" placeholder="Họ tên *">
                                            </div>
                                        </div>
                                        <div class="form-controls">
                                            <label>Mật khẩu:</label>
                                            <div class="controls">
                                                <input type="password" name="password" id="password"
                                                       placeholder="Mật khẩu *">
                                            </div>
                                        </div>
                                        <div class="form-controls">
                                            <label>Nhập lại mật khẩu:</label>
                                            <div class="controls">
                                                <input type="password" name="repassword" id="repassword"
                                                       placeholder="Nhập lại mật khẩu *">
                                            </div>
                                        </div>
                                        <div class="form-controls">
                                            <label>Email:</label>
                                            <div class="controls">
                                                <input type="text" name="email" id="email" placeholder="Email *">
                                            </div>
                                        </div>
                                        <div class="form-controls">
                                            <label>Điện thoại:</label>
                                            <div class="controls">
                                                <input type="tel" name="mobile" id="mobile" placeholder="Điện thoại *"
                                                       data-required="1">
                                            </div>
                                        </div>

                                        <div class="form-controls">
                                            <label>Địa chỉ:</label>
                                            <div class="controls">
                                                <input type="text" name="address" id="address" placeholder="Địa chỉ *"
                                                       data-required="1">
                                            </div>
                                        </div>

                                        <div class="form-controls">
                                            <div class="controls submit-controls">
                                                <button type="submit" id="btnSignup">ĐĂNG KÝ TÀI KHOẢN</button>
                                            </div>
                                        </div>

                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                    <a href="javascript:void(0)" class="close-modal icon-minutes close" data-bs-dismiss="modal"
                       aria-label="Close"><i class="fas fa-minus-circle"></i> </a>
                </div>
            </div>
        </div>
    </div>

    <!--    Logo-->
    <section class="top-category-ads">
        <div class="container">
            <div class="ads-container">
                <div class="full item">
                    <a href="" target="_top">
                        <img src="/img/Wamercy.png" alt="">
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!--    Trang Chủ-->
    <section class="breadcrumb-section">
        <div class="container">
            <ul class="breadcrumb">
                <li><a href="/shop/product/index">Trang chủ<i class="fal fa-home-alt"></i></a></li>
                <li><a>Sản phẩm</a></li>
            </ul>
        </div>
    </section>

    <!--    Filter-->
    <section class="filter-section">
        <div class="container">
            <div class="product-filters2">
                <div class="left">
                    <strong class="label">Lọc danh sách:</strong>
                    <div class="facet">
                        <h2 class="cate-filter-name">Giá</h2>
                        <div class="cate-filter-content">
                            <label>
                                <a>Giá <i class="fal fa-angle-down"></i></a>
                                <span class="mobile-down"><i class="fal fa-angle-down"></i></span>
                            </label>
                            <div class="sub">
                                <ul>
                                    <li><a rel="nofollow" onclick="filterByPrice('0-100000')">Dưới 100k VNĐ</a></li>
                                    <li><a rel="nofollow" onclick="filterByPrice('100000-200000')">100k đến 200k VNĐ</a></li>
                                    <li><a rel="nofollow" onclick="filterByPrice('200000-300000')">200k đến 300k VNĐ</a></li>
                                    <li><a rel="nofollow" onclick="filterByPrice('300000-400000')">300k đến 400k VNĐ</a></li>
                                    <li><a rel="nofollow" onclick="filterByPrice('400000-500000')">400k đến 500k VNĐ</a></li>
                                    <li><a rel="nofollow" onclick="filterByPrice('500000-600000')">500k đến 600k VNĐ</a></li>
                                    <li><a rel="nofollow" onclick="filterByPrice('600000-700000')">600k đến 700k VNĐ</a></li>
                                    <li><a rel="nofollow" onclick="filterByPrice('700000-800000')">700k đến 800k VNĐ</a></li>
                                    <li><a rel="nofollow" onclick="filterByPrice('800000-900000')">800k đến 900k VNĐ</a></li>
                                    <li><a rel="nofollow" onclick="filterByPrice('1000000-')">Trên 1 triệu</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="facet all-attribute">
                        <h2 class="cate-filter-name">Màu sắc</h2>
                        <div class="cate-filter-content">
                            <label>
                                <a>Màu sắc<i class="fal fa-angle-down"></i></a>
                                <span class="mobile-down"><i class="fal fa-angle-down"></i></span>
                            </label>
                            <div class="sub">
                                <ul>
                                    <li><a href="">Hoa <i class="total"></i></a></li>
                                    <li><a href="">Trắng <i class="total"></i></a></li>
                                    <li><a href="">Trắng Đỏ <i class="total"></i></a></li>
                                    <li><a href="">Xanh Hồng <i class="total"></i></a></li>
                                    <li><a href="">Đen<i class="total"></i></a></li>
                                    <li><a href="">Be<i class="total"></i></a></li>
                                    <li><a href="">Hồng Sơn Nhũ<i class="total"></i></a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="facet all-attribute">
                        <h2 class="cate-filter-name">Phân loại</h2>
                        <div class="cate-filter-content">
                            <label>
                                <a>Phân loại<i class="fal fa-angle-down"></i></a>
                                <span class="mobile-down"><i class="fal fa-angle-down"></i></span>
                            </label>
                            <div class="sub">
                                <ul>
                                    <li><a>Woodphoria Boy Smells <i class="total"></i></a></li>

                                    <li><a>Nest Golden Nectar <i class="total"></i></a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="facet all-attribute">
                        <h2 class="cate-filter-name"></h2>
                        <div class="cate-filter-content">
                            <label>
                                <a>Xuất Sứ<i class="fal fa-angle-down"></i></a>
                                <span class="mobile-down"><i class="fal fa-angle-down"></i></span>
                            </label>
                            <div class="sub">
                                <ul>
                                    <li><a>Việt Nam <i class="total"></i></a></li>
                                    <li><a>Hàn Quốc<i class="total"></i></a></li>
                                    <li><a>Mỹ<i class="total"></i></a></li>
                                    <li><a>Canada<i class="total"></i></a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="facet all-attribute">
                        <h2 class="cate-filter-name">Kích thước</h2>
                        <div class="cate-filter-content">
                            <label>
                                <a>Kích thước<i class="fal fa-angle-down"></i></a>
                                <span class="mobile-down"><i class="fal fa-angle-down"></i></span>
                            </label>
                            <div class="sub">
                                <ul>
                                    <li><a>113 <i class="total"></i></a></li>
                                    <li><a>114 <i class="total"></i></a></li>
                                    <li><a>115 <i class="total"></i></a></li>
                                    <li><a>116 <i class="total"></i></a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="right">
                    <div class="facet">
                        <h2 class="cate-filter-name">Sắp xếp</h2>
                        <div class="cate-filter-content">
                            <label>
                                <span class="arrage-filter" href="">Sắp xếp <i class="fal fa-angle-down"></i></span>
                                <span class="mobile-down"><i class="fal fa-angle-down"></i></span>
                            </label>
                            <div class="sub">
                                <ul>
                                    <li><a th:href="@{/shop/product/index}">Mặc định</a></li>
                                    <li><a th:href="@{}">Giá thấp đến cao</a></li>
                                    <li><a th:href="@{}">Giá cao đến thấp</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!--    Sản phẩm-->
    <section class="product-cate-block">
        <div class="container">
            <div class="row" id="searchResult">
                <div class="row row-cols-1 row-cols-md-5 g-3">
                    <div th:each="product : ${list}" class="col">
                        <div class="card shadow-sm">
                            <div class="pi-pic">
                                <div th:if="${product.imageProducts !=null && product.imageProducts.size() > 0}">
                                    <img th:src="${product.imageProducts[0].img}" alt="Ảnh sản phẩm"
                                         class="product-image"/>
                                </div>
                                <br>
                                <div class="product-action">
                                    <a class="btn btn-outline-dark btn-square"
                                       th:onclick="'addToCart(\'' + ${product.id} + '\')'"><i
                                            class="fa fa-shopping-cart"></i></a>
                                    <a class="btn btn-outline-dark btn-square"
                                       th:href="@{/shop/product/detail/{productId}(productId=${product.id})}"><i
                                            class="fa fa-solid fa-eye"></i></a>
                                    <a class="btn btn-outline-dark btn-square" href=""><i
                                            class="fa fa-search"></i></a>
                                </div>
                            </div>
                            <div class="card-body">
                                <p class="name-text" th:text="${product.name}"></p>
                                <div class="card-text"
                                     th:if="${product.productDetails !=null && product.productDetails.size() > 0}">
                                    <span th:text="${#strings.replace(#numbers.formatDecimal(product.getMinPrice(), 0, 'COMMA', 2, 'POINT'), '.00', '')} + ' VNĐ'"></span>
                                    <span th:if="${product.getMaxPrice() > product.getMinPrice()}"
                                          th:text="${' - ' + #strings.replace(#numbers.formatDecimal(product.getMaxPrice(), 0, 'COMMA', 2, 'POINT'), '.00', '')} + ' VNĐ'"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col col-sm-4 col-lg-6 mb-9">
                    <span th:text="${crpage}"></span>/<span th:text="${totalpage}"></span>
                    Trang
                </div>
                <div class="col col-sm-4 col-lg-5 mb-9">
                    <a th:href="@{/shop/product/page(pageno=${crpage-1})}"
                       th:if="${crpage-1 < 1}"
                       class="h-100 mx-2 text-dark pt-1"><i class="fas fa-caret-left fa-lg"></i></a>
                    <a th:unless="${crpage-1 < 1}" th:href="@{/shop/product/page(pageno=${1})}"
                       class="h-100 mx-2 text-dark pt-1"><i class="fas fa-caret-left fa-lg"></i></a>
                    <a th:unless="${crpage == totalpage}"
                       th:href="@{/shop/product/page(pageno=${crpage+1})}"
                       class="h-100 mx-2 text-dark pt-1"><i
                            class="fas fa-caret-right fa-lg"></i></a>
                    <a th:if="${crpage == totalpage}"
                       th:href="@{/shop/product/page(pageno=${totalpage})}"
                       class="h-100 mx-2 text-dark pt-1"><i
                            class="fas fa-caret-right fa-lg"></i></a>
                </div>
                <form action="#" th:action="@{/shop/product/getcountrow}"
                      class="col col-sm-4 col-lg-1 mb-9" method="get" id="rowCountForm">
                    <select name="selectedValue" class="border-0" id="rowCount"
                            onchange="document.getElementById('rowCountForm').submit();">
                        <option value="10" th:selected="${rowcount == 10}">10 Sản phẩm</option>
                        <option value="20" th:selected="${rowcount == 20}">20 Sản phẩm</option>
                        <option value="50" th:selected="${rowcount == 50}">50 Sản phẩm</option>
                    </select>
                </form>
            </div>
        </div>
    </section>
    <!-- Your Plugin chat code -->

    <script>
        var chatbox = document.getElementById('fb-customer-chat');
        chatbox.setAttribute("page_id", "103005398881881");
        chatbox.setAttribute("attribution", "biz_inbox");
    </script>

    <script>
        function filterByPrice(priceRange) {
            // Lấy danh sách tất cả các sản phẩm
            var products = document.querySelectorAll('.col');

            // Lặp qua từng sản phẩm và kiểm tra giá
            for (var i = 0; i < products.length; i++) {
                var product = products[i];
                var priceText = product.querySelector('.card-text span').innerText;
                var price = parseInt(priceText.replace(' VNĐ', '').replace(',', '').replace('.', ''));

                // Kiểm tra nếu sản phẩm nằm trong khoảng giá được chọn
                if (priceRange === '1000000-') {
                    // Trường hợp "Trên 10 triệu"
                    if (price < 1000000) {
                        product.style.display = 'none';
                    } else {
                        product.style.display = 'block';
                    }
                } else {
                    // Trường hợp các khoảng giá khác
                    var range = priceRange.split('-');
                    var minPrice = parseInt(range[0]);
                    var maxPrice = parseInt(range[1]);

                    if (price < minPrice || price > maxPrice) {
                        product.style.display = 'none';
                    } else {
                        product.style.display = 'block';
                    }
                }
            }
        }
    </script>


    <!-- Your SDK code -->
    <script>
        window.fbAsyncInit = function () {
            FB.init({
                xfbml: true,
                version: 'v15.0'
            });
        };

        (function (d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) return;
            js = d.createElement(s);
            js.id = id;
            js.src = 'https://connect.facebook.net/vi_VN/sdk/xfbml.customerchat.js';
            fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));
    </script>
    <input type="hidden" id="bussinessId" value="119888"><input type="hidden"
                                                                value="ZdC56JSZlSaf8C9X8pR3mBLnXYAWlJvYNqnGKPD2OfzAg9MgHuGiUWUzo0zT1ofvtcF18fPjCzoP4sUOQjWova2zSqfP3Lcr3Ix3srUqXvoJSO9QcNCbnOqeHFygbRrI7CvPQ94jnndlrndI6CK6jemb7nn6yHLAqUwiCrKWUiU1RtBh9hqWn14xp8seZTctCxdcHGSl6qW8Eoyn0VHIRpJbke16CR5FS"
                                                                id="uctk" name="uctk"><input type="hidden" id="clienIp"
                                                                                             value="58.186.179.175"><input
        type="hidden" value="" id="hasIdentity">

    <ul class="ui-autocomplete ui-front ui-menu ui-widget ui-widget-content ui-corner-all" id="ui-id-1" tabindex="0"
        style="display: none;"></ul>
</section>
</body>
<div style="position: absolute; top: 0px; z-index: 2147483647; display: block !important;"></div>
</html>